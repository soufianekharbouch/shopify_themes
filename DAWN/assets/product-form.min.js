!function(){"use strict";customElements.get("product-form")||customElements.define("product-form",class extends HTMLElement{constructor(){var t,e,i;super(),i=t=>{const e=t?"add":"remove";this.form.closest(".product-form").classList[e]("adding")},(e="toggleSpinner")in(t=this)?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,this.selectors={form:"form",inputId:"[name=id]",submitButton:'[name="add"]',errorWrapper:".prod__form-error",customFields:["[data-product-custom-field]"],dynamicCheckout:".prod__dynamic_checkout"},this.domNodes=queryDomNodes(this.selectors,this),this.form=this.domNodes.form,this.submitButton=this.domNodes.submitButton,this.domNodes.inputId.disabled=!1,this.Notification=window.MinimogTheme.Notification,this.notificationType=this.dataset.notificationType,this.customFields=document.querySelectorAll(this.selectors.customFields),this.form.addEventListener("submit",this.onSubmitHandler.bind(this)),this.domNodes.dynamicCheckout&&this.customFields&&this.domNodes.dynamicCheckout.addEventListener("click",(t=>{validateForm(this.form.closest(".main-product__blocks")).length>0&&(t.stopPropagation(),this.Notification.show({target:this.domNodes.errorWrapper,method:"appendChild",type:"warning",message:window.MinimogStrings.requiredField,delay:100}))}),!0)}onSubmitHandler(t){t.preventDefault(),this.toggleSpinner(!0);if(validateForm(this.form.closest(".main-product__blocks"))?.length>0)return this.toggleSpinner(!1),this.Notification.show({target:this?.domNodes?.errorWrapper,method:"appendChild",type:"warning",message:window.MinimogStrings.requiredField});const e={method:"POST",headers:{Accept:"application/javascript","X-Requested-With":"XMLHttpRequest"}},i=new FormData(this.form);e.body=i;const{MinimogSettings:o,MinimogStrings:s}=window;o.use_ajax_atc?fetch(`${o.routes.cart_add_url}`,e).then((t=>t.json())).then((t=>{if(t.status)return this.Notification.show({target:"toast"===this.notificationType?document.body:this.domNodes.errorWrapper,method:"appendChild",type:"warning",message:t.description,last:3e3,sticky:"toast"===this.notificationType});o.enable_cart_drawer||this.Notification.show({target:this.domNodes.errorWrapper,method:"appendChild",type:"success",message:window.MinimogStrings.itemAdded,last:3e3,sticky:"toast"===this.notificationType}),window.MinimogEvents.emit("ON_ITEM_ADDED",t),window.Shopify.onItemAdded(t)})).catch((t=>{})).finally((()=>{this.toggleSpinner(!1)})):this.form.submit()}})}();