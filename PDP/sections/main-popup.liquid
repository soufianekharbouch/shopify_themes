<style>
  .reload-popup-wrap {
      position: relative;
      padding: 0 15px;
      max-width: 830px;
      width: 100%;
      margin: 0 auto;
  }
  .reload-popup-main {
      display: flex;
      flex-wrap: wrap;
  }
  .reload-popup-image {
      width: 60%;
  }
  .reload-popup-info {
      padding: 15px;
      width: 40%;
      background-color: #de1313;
  }
  .reload-popup-image img {
      height: 100%;
      object-fit: cover;
  }
  .reload-popup-info img {
    max-width: 250px;
  }
  .reload-popup-info h2 {
      margin: 0 0 10px;
      color: #fff;
      font-size: 32px;
      font-weight: 600;
      text-transform: uppercase;
      line-height: 1.2;
  }
  .reload-popup-info p {
      margin: 0;
      color: #fff;
      font-weight: 400;
      font-size: 14px;
      line-height: 1.5;
  }
  .reload-popup-main .field {
      display: block;
  }
  .reload-popup-main .field input {
      padding: 5px 10px;
      height: 40px;
      font-size: 14px;
      font-weight: 400;
      line-height: 1.2;
    width: 100%;
  }
  .reload-popup-main .field label.field__label {
      color: #fff;
  }
  .reload-popup-main .field__input:focus~.field__label {
      visibility: hidden;
  }
  .reload-popup-info h3#ContactFooter-success {
      color: #fff;
  }
  .reload-popup-main .newsletter-form__field-wrapper button {
      gap: 5px;
      font-weight: 400;
      margin-top: 10px;
      width: 100% !important;
      max-width: 100%;
      margin-left: 0 !important;
      border: 1px solid transparent !important;
      background: #000 !important;
      color: #fff;
      padding: 10px 15px;
      height: auto !important;
      cursor: pointer;
  }
  .reload-popup-info form#ContactFooter {
      margin: 20px 0;
  }
  .reload-popup-wrap .close-btn {
    cursor: pointer;
    width: 20px;
    height: 20px;
    color: #fff;
    border-radius: 100%;
    position: absolute;
    top: 9px;
    right: 25px;
    z-index: 9;
  }
  .reload-popup-wrap .close-btn svg.icon.icon-close-small {
    width: 20px;
    height: 20px;
  }
  .reload-popup {
      position: fixed;
      inset: 0;
      z-index: 9999;
      display: flex;
      align-items: center;
      justify-content: center;
      background: rgba(0,0,0,0.5);
  }
  @media only screen and (max-width: 768px){
    .reload-popup-image, .reload-popup-info {
        width: 100%;
    }
    .reload-popup-info {
        text-align: center;
    }
    .reload-popup-info form#ContactFooter {
        margin: 20px auto;
    }
  }
  @media only screen and (max-width: 640px){
    .reload-popup-wrap {
      max-width: 350px;
    }
    .new-related-slier-info img.product__img {
      width: 100%;
      height: 200px;
    }
    .reload-popup-info img {
      max-width: 150px;
    }
    .reload-popup-image img {
      width: 100%;
      object-fit: cover;
      height: 200px;
      display: flex;
      border-top-right-radius: 8px;
      border-top-left-radius: 8px;
    }
    .reload-popup-info h2 {
        margin: 0 0 5px;
        font-size: 24px;
    }
    .reload-popup-info form#ContactFooter {
        margin: 10px auto;
    }
    .reload-popup-info p {
      font-size: 10px;
    }
  }
</style>
{% if template.name != 'product' %}
<div class="reload-popup hidden">
  <div class="reload-popup-wrap">
    <div class="close-btn">
      {% render 'icon', name: 'x' %}
    </div>
    <div class="reload-popup-main">
      <div class="reload-popup-image">
        <img src="{{ section.settings.image | img_url: "master" }}">
      </div>
      <div class="reload-popup-info">
        <img src="{{ section.settings.logo | img_url: "master" }}">
        {{ section.settings.main_title }}
        {%- form 'customer', id: 'ContactFooter', class: 'footer__newsletter newsletter-form' -%}
          <input type="hidden" name="contact[tags]" value="newsletter">
          <div class="newsletter-form__field-wrapper">
            <div class="field">
              <input
                id="NewsletterForm--{{ section.id }}"
                type="email"
                name="contact[email]"
                class="field__input"
                value="{{ form.email }}"
                aria-required="true"
                autocorrect="off"
                autocapitalize="off"
                autocomplete="email"
                placeholder="Enter you Email"
                {% if form.errors %}
                  autofocus
                  aria-invalid="true"
                  aria-describedby="ContactFooter-error"
                {% elsif form.posted_successfully? %}
                  aria-describedby="ContactFooter-success"
                {% endif %}
                required
              >
              <button
                type="submit"
                class="newsletter-form__button field__button"
                name="commit"
                id="Subscribe"
              >Subscribe</button>
            </div>
            {%- if form.errors -%}
              <small class="newsletter-form__message form__message" id="ContactFooter-error">
                {{- form.errors.translated_fields.email | capitalize }}
                {{ form.errors.messages.email -}}
              </small>
            {%- endif -%}
          </div>
          {%- if form.posted_successfully? -%}
            <h3
              class="newsletter-form__message newsletter-form__message--success form__message"
              id="ContactFooter-success"
              tabindex="-1"
              autofocus
            >
            </h3>
          {%- endif -%}
        {%- endform -%}
        {{ section.settings.info }}
      </div>
    </div>
  </div>
</div>
<script>
 
  const subscribe = document.querySelector('.reload-popup-wrap .close-btn');
  subscribe?.addEventListener('click', (e) =>{
    subscribe?.parentElement.parentElement.classList.add('hidden')
    localStorage.setItem('newsletter', true);
  });
  subscribe.parentElement.parentElement.addEventListener('click', (event)=>{
    const elementToClose = subscribe.parentElement;
    if (!elementToClose.contains(event.target)) {
      subscribe.click();
    }
  });
  subscribe?.parentElement.querySelector('form')?.addEventListener('submit', (e) =>{
    e.preventDefault();
    localStorage.setItem('newsletter', true);
    return true;
  });
  let isE = localStorage.getItem('newsletter');
  if(!isE) {
    setTimeout(()=> subscribe?.parentElement.parentElement.classList.remove('hidden'), 3000)
  }
</script>
{% endif %}
{% schema %}
  {
    "name": "Popup Section",
    "settings": [
      {
        "type": "image_picker",
        "id": "image",
        "label": "Add Image"
      },
      {
        "type": "image_picker",
        "id": "logo",
        "label": "Add Logo"
      },
      {
        "type": "richtext",
        "id": "main_title",
        "label": "Add Title"
      },
      {
        "type": "richtext",
        "id": "info",
        "label": "Add Text"
      }
    ],
    "presets": [
      {
        "name": "Popup Section"
      }
    ]
  }
{% endschema %}