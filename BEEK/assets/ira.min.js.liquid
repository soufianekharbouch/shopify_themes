(function(a){a.fn.prepareTransition=function(){return this.each(function(){var b=a(this);b.one("TransitionEnd webkitTransitionEnd transitionend oTransitionEnd",function(){b.removeClass("is-transitioning")});var c=["transition-duration","-moz-transition-duration","-webkit-transition-duration","-o-transition-duration"];var d=0;a.each(c,function(a,c){d=parseFloat(b.css(c))||d});if(d!=0){b.addClass("is-transitioning");b[0].offsetWidth}})}})(jQuery);function replaceUrlParam(e,r,a){var n=new RegExp("("+r+"=).*?(&|$)"),c=e;return c=e.search(n)>=0?e.replace(n,"$1"+a+"$2"):c+(c.indexOf("?")>0?"&":"?")+r+"="+a};var afterResize=(function(){var t={};return function(callback,ms,uniqueId){if(!uniqueId){uniqueId="Don't call this twice without a uniqueId";}if(t[uniqueId]){clearTimeout(t[uniqueId]);}t[uniqueId]=setTimeout(callback,ms);};})();if((typeof Shopify)==='undefined'){Shopify={};}
if(!Shopify.formatMoney){Shopify.formatMoney=function(cents,format){var value='',placeholderRegex=/\{\{\s*(\w+)\s*\}\}/,formatString=(format||this.money_format);if(typeof cents=='string'){cents=cents.replace('.','');}
function defaultOption(opt,def){return(typeof opt=='undefined'?def:opt);}
function formatWithDelimiters(number,precision,thousands,decimal){precision=defaultOption(precision,2);thousands=defaultOption(thousands,',');decimal=defaultOption(decimal,'.');if(isNaN(number)||number==null){return 0;}
number=(number/100.0).toFixed(precision);var parts=number.split('.'),dollars=parts[0].replace(/(\d)(?=(\d\d\d)+(?!\d))/g,'$1'+thousands),cents=parts[1]?(decimal+parts[1]):'';return dollars+cents;}
switch(formatString.match(placeholderRegex)[1]){case'amount':value=formatWithDelimiters(cents,2);break;case'amount_no_decimals':value=formatWithDelimiters(cents,0);break;case'amount_with_comma_separator':value=formatWithDelimiters(cents,2,'.',',');break;case'amount_no_decimals_with_comma_separator':value=formatWithDelimiters(cents,0,'.',',');break;}
return formatString.replace(placeholderRegex,value);};}
window.ira=window.ira||{};ira.cacheSelectors=function(){ira.cache={$html:$('html'),$body:$('body'),$navigation:$('#AccessibleNav'),$mobileSubNavToggle:$('.mobile-nav__has-sublist'),$header:$('.site-header'),$headerControls:$('.site-header-controls'),$allDrawers:$('.drawer'),$changeView:$('.change-view'),$productImage:$('#ProductPhotoImg'),$thumbImages:$('#ProductThumbs').find('a.product-single__thumbnail'),$recoverPasswordLink:$('#RecoverPassword'),$hideRecoverPasswordLink:$('#HideRecoverPasswordLink'),$recoverPasswordForm:$('#RecoverPasswordForm'),$customerLoginForm:$('#CustomerLoginForm'),$passwordResetSuccess:$('#ResetSuccess'),$exitIntentOverlay:$('.exit-intent-overlay'),$notificationBar:$('#notification-bar'),$fadeOutOverlay:$('.fadeout-overlay'),$searchBar:$('#HeaderSearchBar'),$pageContainer:$("#PageContainer")};};ira.init=function(){FastClick.attach(document.body);ira.cacheSelectors();ira.accessibleNav();ira.drawersInit();ira.mobileNavToggle();ira.productImageSwitch();ira.responsiveVideos();ira.collectionViews();ira.loginForms();ira.masonryInit();ira.imageGridInit();ira.headerInit();ira.carouselInit();ira.exitIntentInit();ira.searchInit();ira.fadeOutOnClick();ira.truncateExcerptText();{%if settings.use_instagrid%}
ira.initInstaGrid();{%endif%}
ira.parallax();{%if settings.video_player_enable or settings.video_player_enable_v2%}
ira.autoplayOnMobile();{%endif%}
ira.cache.$body.addClass('ready');$(document).trigger('ira.ready');};ira.autoplayOnMobile=function(){function startVideo(){$('.video-section > video').each(function(i,e){e.play()});$(document).off('touchstart',startVideo);}
$(document).on('touchstart',startVideo);}
ira.accessibleNav=function(){var $nav=ira.cache.$navigation,$allLinks=$nav.find('a'),$topLevel=$nav.children('li').find('a'),$parents=$nav.find('.site-nav--has-dropdown'),$subMenuLinks=$nav.find('.site-nav__dropdown').find('a'),activeClass='nav-hover',focusClass='nav-focus';$parents.on('mouseenter touchstart',function(evt){var $el=$(this);if(!$el.hasClass(activeClass)){evt.preventDefault();}
showDropdown($el);});$parents.on('mouseleave',function(){hideDropdown($(this));});$subMenuLinks.on('touchstart',function(evt){evt.stopImmediatePropagation();});$allLinks.blur(function(){removeFocus($topLevel);});function handleFocus($el){var $subMenu=$el.next('ul'),hasSubMenu=$subMenu.hasClass('sub-nav')?true:false,isSubItem=$('.site-nav__dropdown').has($el).length,$newFocus=null;if(!isSubItem){removeFocus($topLevel);addFocus($el);}else{$newFocus=$el.closest('.site-nav--has-dropdown').find('a');addFocus($newFocus);}}
function showDropdown($el){$el.addClass(activeClass);setTimeout(function(){ira.cache.$body.on('touchstart',function(){hideDropdown($el);});},250);}
function hideDropdown($el){$el.removeClass(activeClass);ira.cache.$body.off('touchstart');}
function addFocus($el){$el.addClass(focusClass);}
function removeFocus($el){$el.removeClass(focusClass);}};ira.headerInit=function(){ira.stickyHeader();ira.transparentHeader();}
ira.stickyHeader=function(){var CLASS_NAME='sticky-header';var stickyHeaderEnabled={{settings.sticky_header}};var notificationBarEnabled={{settings.notification_bar_enable}};if(window.location.pathname.indexOf("products")!==-1&&ira.cache.$html.hasClass('supports-touch')){return $('.'+CLASS_NAME).removeClass(CLASS_NAME);}
if(stickyHeaderEnabled){var header=ira.cache.$header;var searchBar=ira.cache.$searchBar;var header=header.add(searchBar);var headerControls=ira.cache.$headerControls;var controlsHeight=headerControls.height();var notificationBarHeight=ira.cache.$notificationBar.height();if(notificationBarEnabled){controlsHeight+=notificationBarHeight;}
function notificationBarOffset(){var sheet=document.getElementById('js-notificationBarStyle');if(!sheet){sheet=document.createElement('style');sheet.id='js-notificationBarStyle'}
if(navigator.appVersion.indexOf("MSIE 8")>0){var ie8Styles=document.createElement('style');document.getElementsByTagName('head')[0].appendChild(ie8Styles);ie8Styles.setAttribute('type','text/css');ie8Styles.styleSheet.cssText=".offset-by-notification-bar {top: "+ira.cache.$notificationBar.height()+"px}";}
else{sheet.innerHTML=".offset-by-notification-bar {top: "+ira.cache.$notificationBar.height()+"px} @media (max-width: 839px) { :not(.js-drawer-open) .sm-offset-by-notification-bar {top: "+ira.cache.$notificationBar.height()+"px}}";}
document.body.appendChild(sheet);}
var detachHeader=function(){if(ira.cache.$body.hasClass('js-drawer-open')){return;}
var top=window.pageYOffset?window.pageYOffset:document.documentElement.scrollTop?document.documentElement.scrollTop:document.body.scrollTop;if(top<=controlsHeight){headerControls.removeClass('medium-down--fixed');ira.cache.$searchBar.removeClass('medium-down--fixed');ira.cache.$body.removeClass('js-header-attached');if($(window).width()<=840&&ira.cache.$searchBar.offset().top<ira.cache.$headerControls.offset().top){ira.cache.$searchBar.css('top',ira.cache.$header.height()+1);}
$(window).off('scroll',detachHeader);$(window).on('scroll',attachAndCondenseHeader);}}
var attachAndCondenseHeader=function(){if(ira.cache.$body.hasClass('js-drawer-open')){return;}
var top=window.pageYOffset?window.pageYOffset:document.documentElement.scrollTop?document.documentElement.scrollTop:document.body.scrollTop;var controlsOffset=headerControls.position().top;if(notificationBarEnabled&&top>=notificationBarHeight){header.removeClass('offset-by-notification-bar')}
else if(notificationBarEnabled&&top<notificationBarHeight){header.addClass('offset-by-notification-bar')}
if(top>=controlsHeight&&!headerControls.hasClass('medium-down--fixed')){headerControls.addClass('medium-down--fixed');ira.cache.$searchBar.addClass('medium-down--fixed');ira.cache.$body.addClass('js-header-attached');if($(window).width()<=840&&ira.cache.$searchBar.offset().top<ira.cache.$headerControls.offset().top){ira.cache.$searchBar.css('top',ira.cache.$header.height()+1);}
$(window).on('scroll',detachHeader);}};$(window).on('scroll',attachAndCondenseHeader);$(window).on('resize',detachHeader);attachAndCondenseHeader();detachHeader();if(notificationBarEnabled){notificationBarOffset();$(window).resize(notificationBarOffset);}}}
ira.transparentHeader=function(){var transparentHeaderEnabled={{settings.transparent_header}};var stickyHeaderEnabled={{settings.sticky_header}};var className='transparent-header';if(window.location.pathname!=='/'){$('.'+className).removeClass(className);}
this.adjustContentOffset();var hasScrolled=false;var header=ira.cache.$header;var headerControlsHeight=ira.cache.$headerControls.height();var fadeInClassName='.js-transparent-header-fadein:first';var carouselContainer=$('.carousel-container');var animating=false;if($(fadeInClassName).length===0){return;}
if(transparentHeaderEnabled&&stickyHeaderEnabled){$(window).on('scroll',scrollAnimationLoop);}
function scrollAnimationLoop(){if(!animating){drawScroll();requestAnimationFrame(scrollAnimationLoop);animating=true;}}
function drawScroll(){fadeInTransparentHeader();fadeOutHandler();animating=false;}
function fadeInTransparentHeader(){var top=window.pageXOffset?window.pageXOffset:document.documentElement.scrollTop?document.documentElement.scrollTop:document.body.scrollTop;var storyGridStart=$(fadeInClassName).position().top;var offset=storyGridStart-headerControlsHeight;if(ira.cache.$headerControls.css('position')=='fixed'&&(!!carouselContainer.length)){offset-=parseInt(carouselContainer.css('padding-bottom').replace('px',''),10)}
if(top>=offset){ira.cache.$headerControls.css('transition','0.3s');header.removeClass(className);$(window).on('scroll',fadeOutHandler);$(window).off('scroll',fadeInTransparentHeader);}}
function fadeOutHandler(){var top=window.pageXOffset?window.pageXOffset:document.documentElement.scrollTop?document.documentElement.scrollTop:document.body.scrollTop;var storyGridStart=$(fadeInClassName).position().top;var offset=storyGridStart-headerControlsHeight;if(ira.cache.$headerControls.css('position')=='fixed'&&(!!carouselContainer.length)){offset-=parseInt(carouselContainer.css('padding-bottom').replace('px',''),10)}
if(top<=offset){header.addClass(className);setTimeout(function(){ira.cache.$headerControls.css('transition','0s')},600);$(window).on('scroll',fadeInTransparentHeader);$(window).off('scroll',fadeOutHandler);}}}
ira.adjustContentOffset=function(){var transparentHeaderEnabled={{settings.transparent_header}};var transparentHeaderEnabled=(transparentHeaderEnabled&&window.location.pathname==='/');var parallaxEnabled=(window.location.pathname==='/');var stickyHeaderEnabled=({{settings.sticky_header}});function adjust(){var paddingTopDistance=0;var headerSizeDistance=0;$('#notification-bar').each(function(i,e){var height=$(e).height();paddingTopDistance+=height;headerSizeDistance+=height;});if($(window).width()<=840||navigator.appVersion.indexOf("MSIE 8")>1){headerSizeDistance+=80;if(!transparentHeaderEnabled){paddingTopDistance+=80;}}
$('.site-header').each(function(i,e){var height=$(e).height();headerSizeDistance+=height;if(!transparentHeaderEnabled){paddingTopDistance+=height;}})
if(parallaxEnabled&&!transparentHeaderEnabled){paddingTopDistance-=40;}
if(paddingTopDistance>=40){paddingTopDistance-=1;}
ira.cache.$pageContainer.css('padding-top',paddingTopDistance);return paddingTopDistance;}
if(!this.hasSetContentAdjustOnResize){this.hasSetContentAdjustOnResize=true;$(window).resize(adjust);}
return adjust();}
ira.searchInit=function(){var config={openClassSelector:'.search-open',closeClassSelector:'.search-close',showSearchClass:'show',searchBarSelector:'#HeaderSearchBar',searchInputSelector:'#searchBarInput',jsClassOpen:'js-search-open'}
var transparentHeaderEnabled={{settings.transparent_header}};var $nodes={open:$(config.openClassSelector),close:$(config.closeClassSelector),searchBar:$(config.searchBarSelector),input:$(config.searchInputSelector)};$nodes.close.add($nodes.input).attr('tabindex',-1);function drawerOpenHandler(e){$nodes.searchBar.addClass(config.showSearchClass);$nodes.close.add($nodes.input).attr('tabindex',0)
if(!((navigator.userAgent.match(/(iPod|iPhone|iPad)/)&&{{settings.sticky_header}})||navigator.appVersion.indexOf("MSIE 8")>0)){$nodes.input[0].select();}
ira.cache.$header.add(ira.cache.$html).addClass(config.jsClassOpen);e.preventDefault();e.stopPropagation();return false;}
function drawerCloseHandler(e){if(typeof e!=='undefined'&&typeof e.preventDefault=="function"){e.preventDefault();}
$nodes.searchBar.removeClass(config.showSearchClass);ira.cache.$header.add(ira.cache.$html).removeClass(config.jsClassOpen);$nodes.close.add($nodes.input).attr('tabindex',0);}
function keyboardHandlers(){window.onkeydown=function(event){if(event.keyCode===27){drawerCloseHandler();}
if(event.keyCode===70&&event.altKey){event.preventDefault();drawerOpenHandler()}};}
function closeOnOutsideClick(e){if(!($nodes.searchBar[0].contains(e.target)||ira.cache.$header[0].contains(e.target))){drawerCloseHandler();}}
function killEvent(e){e.preventDefault();e.stopPropagation();}
if(navigator.appVersion.indexOf("MSIE 8")<=0){$($nodes.open[0]).on('click',drawerOpenHandler);$($nodes.close[0]).on('click',drawerCloseHandler);$($nodes.searchBar[0]).on('click',killEvent)
$(document).on('click',closeOnOutsideClick);keyboardHandlers();}}
ira.drawersInit=function(){ira.NavDrawer=new ira.Drawers('NavDrawer','right');ira.CartDrawer=new ira.Drawers('CartDrawer','right',{'onDrawerOpen':ajaxCart.load});ira.allDrawers=[ira.NavDrawer,ira.CartDrawer];};ira.exitIntentInit=function(){var $overlay=this.cache.$exitIntentOverlay;var exitIntentDelay=2500;var disableExitIntent=false;$('body').on('click','.close-exit-intent',function(e){e.preventDefault();$overlay.removeClass('show');});$('body').on('click','.show-exit-intent',function(e){e.preventDefault();$overlay.addClass('show');})
$('body').on('click','.exit-intent-overlay',function(e){if($(e.target).parents('.exit-intent').length===0){e.preventDefault();$overlay.removeClass('show');}});{%if settings.enable_exit_intent%}
setTimeout(function(){$(document).on('mouseleave',function(){if(!disableExitIntent){disableExitIntent=true;$overlay.addClass('show');}});},exitIntentDelay);{%endif%}}
ira.imageGridInit=function(){ira.grid=new ira.ImageGrid();}
ira.masonryInit=function(){var MASONRY_CLASS_SELECTOR='.grid--masonry';var NOT_READY_CLASS='grid--masonry__hide'
var MAX_TIME_UNTIL_VISIBLE=3000;var masonryGrids=$(MASONRY_CLASS_SELECTOR);var masonryInitialized=false;masonryGrids.imagesLoaded().done(function(){masonryGrids.masonry({isAnimated:false,isInitLayout:false,gutter:0});masonryGrids.each(function(i,e){var $e=$(e);$e.masonry();});return masonryInitialized=true;});ira.masonryLayout=function(){if(masonryInitialized){return masonryGrids.masonry('layout');}
else{return false;}}};ira.carouselInit=function(){
{%if settings.enable_homepage_carousel%}
ira.primaryCarousel=new ira.Carousel({carouselID:'#primaryCarousel'});{%endif%}
{%if settings.enable_homepage_carousel_v2%}
ira.secondaryCarousel=new ira.Carousel({carouselID:'#secondaryCarousel'});{%endif%}}
ira.mobileNavToggle=function(){ira.cache.$mobileSubNavToggle.on('click',function(){$(this).toggleClass('mobile-nav--expanded');$(this).find('button > .icon').toggleClass('fade-in fade-and-flip');});};ira.getHash=function(){return window.location.hash;};ira.updateHash=function(hash){window.location.hash='#'+hash;console.log('updating hash');$('#'+hash).attr('tabindex',-1).focus();};ira.productPage=function(options){var moneyFormat=options.money_format,variant=options.variant,selector=options.selector;var $productImage=$('#ProductPhotoImg'),$addToCart=$('#AddToCart'),$productPrice=$('#ProductPrice'),$comparePrice=$('#ComparePrice'),$quantityElements=$('.quantity-selector, label + .js-qty'),$addToCartText=$('#AddToCartText');if(variant){if(variant.featured_image){var newImg=variant.featured_image,el=$productImage[0];var target=(function(){var selectedID;$('[data-variant-id]').each(function(i,e){if(typeof selectedID!=='undefined')return false;var variantIDs=$(e).attr('data-variant-id').split('-');for(var i=0;i<=variantIDs.length;i++){if(variantIDs[i]==variant.id){selectedID=$(e).attr('id');break;}};});return $('#'+selectedID);})();if(!target.length){target=$('#ProductPhotoImg');}
if(target.length&&$(window).width()>=841){$('#PhotoContent').animate({scrollTop:$('#PhotoContent').scrollTop()+target.position().top},500);}}
if(variant.available){$addToCart.removeClass('disabled').prop('disabled',false);$addToCartText.html({{'products.product.add_to_cart'|t|json}});$quantityElements.show();}else{$addToCart.addClass('disabled').prop('disabled',true);$addToCartText.html({{'products.product.sold_out'|t|json}});$quantityElements.hide();}
$productPrice.html(Shopify.formatMoney(variant.price,moneyFormat));if(variant.compare_at_price>variant.price){$comparePrice.html(Shopify.formatMoney(variant.compare_at_price,moneyFormat)).show();}else{$comparePrice.hide();}}else{$addToCart.addClass('disabled').prop('disabled',true);$addToCartText.html({{'products.product.unavailable'|t|json}});$quantityElements.hide();}};ira.productImageSwitch=function(){if(ira.cache.$thumbImages.length){ira.cache.$thumbImages.on('click',function(evt){evt.preventDefault();var newImage=$(this).attr('href');ira.switchImage(newImage,null,ira.cache.$productImage);});}};ira.switchImage=function(src,imgObject,el){var $el=$(el);$el.attr('src',src);};ira.responsiveVideos=function(){$('iframe[src*="youtube.com/embed"]').wrap('<div class="video-wrapper"></div>');$('iframe[src*="player.vimeo"]').wrap('<div class="video-wrapper"></div>');};ira.collectionViews=function(){if(ira.cache.$changeView.length){ira.cache.$changeView.on('click',function(){var view=$(this).data('view'),url=document.URL,hasParams=url.indexOf('?')>-1;if(hasParams){window.location=replaceUrlParam(url,'view',view);}else{window.location=url+'?view='+view;}});}
$('.supports-touch .product_image_caption').each(function(i,e){var $e=$(e);var textLength=$e.find('.h2').text().length;var fontSize=16;switch(true){case(textLength<50):fontSize=16;break;case(textLength<100):fontSize=15;break;case(textLength<150):fontSize=14;break;case(textLength<200):fontSize=13;break;case(textLength>=200):fontSize=12;break;default:fontSize=16;break;}
$e.css('font-size',fontSize);});};ira.loginForms=function(){function showRecoverPasswordForm(){ira.cache.$recoverPasswordForm.show();ira.cache.$customerLoginForm.hide();}
function hideRecoverPasswordForm(){ira.cache.$recoverPasswordForm.hide();ira.cache.$customerLoginForm.show();}
ira.cache.$recoverPasswordLink.on('click',function(evt){evt.preventDefault();showRecoverPasswordForm();});ira.cache.$hideRecoverPasswordLink.on('click',function(evt){evt.preventDefault();hideRecoverPasswordForm();});if(ira.getHash()=='#recover'){showRecoverPasswordForm();}};ira.resetPasswordSuccess=function(){ira.cache.$passwordResetSuccess.show();};ira.initInstaGrid=function(){ira.instaGrid=new ira.InstaGrid();}
ira.fadeOutOnClick=function(){window.onunload=function(e){console.info("unload event:",e);};window.onpageshow=function(event){if(event.persisted){window.location.reload()}};var $overlay=this.cache.$fadeOutOverlay;var time=300;var animation='ease';$('body').on('click','a',function(e){if(e.metaKey||e.shiftKey)return;var href=$(this).attr('href');if(typeof href==='undefined'||href==='#'||href.indexOf('#')===0)return;if($(this).attr('target')=="_blank")return;e.preventDefault();$overlay.addClass('show');setTimeout(function(){location.href=href;}.bind(this),time / 2)});}
ira.parallax=function(){if(window.location.pathname!=='/'){return;}
var animating=false;ira.cache.$body.addClass('js-parallax');function draw(){if(!animating){requestAnimationFrame(scrollEvent);animating=true;}}
draw();var throttleOpacity=_.throttle(function(){var windowHeight=$(window).height();var viewportTop=$(window).scrollTop();var fadeSpeed=$(this).attr('data-fade-speed');var opacity=-(viewportTop*fadeSpeed / windowHeight-1);if(viewportTop<=0||opacity>=1){opacity=1-0.001;}
$(this).css('opacity',opacity);},10);function scrollEvent(){if(!is_touch_device()){var viewportTop=$(window).scrollTop();var windowHeight=$(window).height();var viewportBottom=windowHeight+viewportTop;if($(window).width())
$('[data-parallax="true"]').each(function(){var sym;var direction=$(this).attr('data-direction');var speed=$(this).attr('data-speed');var distance=viewportTop*speed;if(direction==='up'){sym='-';}else{sym='';}
$(this).css('transform','translate3d(0, '+sym+distance+'px,0)');});$('[data-fade-speed]').each(throttleOpacity);animating=false;}}
function is_touch_device(){return'ontouchstart'in window||'onmsgesturechange'in window;}
$(window).on('scroll',draw);$(window).on('resize',function(){maxDistance=0;});};ira.truncateExcerptText=function(){var MAX_CHARS=180;$('.excerpt').each(function(i,e){var origText=$(this).text();if(origText.length>MAX_CHARS){var cut=cutKeepingTags(this,180);var elements=$(cut.text);elements.find('*:last-child').last().text(elements.find('*:last-child').last().text()+'...');$(this).text('').append(elements);}});function cutKeepingTags(elem,reqCount){var grabText='',missCount=reqCount;$(elem).contents().each(function(){switch(this.nodeType){case Node.TEXT_NODE:grabText+=this.data.substr(0,missCount);missCount-=Math.min(this.data.length,missCount);break;case Node.ELEMENT_NODE:var childPart=cutKeepingTags(this,missCount);grabText+=childPart.text;missCount-=childPart.count;break;}
if(missCount==0){return false;}});return{text:elem.outerHTML.match(/^<[^>]+>/m)[0]
+grabText
+'</'+elem.localName+'>',count:reqCount-missCount};}}
ira.Drawers=(function(){var Drawer=function(id,position,options){var defaults={close:'.js-drawer-close',open:'.js-drawer-open-'+id,openClass:'js-drawer-open',dirOpenClass:'js-drawer-open-'+id};this.$nodes={parent:$('body, html'),page:$('#PageContainer'),moved:$('.is-moved-by-drawer'),headerControl:$('.header-control'+'.'+defaults.dirOpenClass),background:$('.drawer__background'),content:$('#'+id+' .drawer__content')};this.config=$.extend(defaults,options);this.position=position;this.id=id;this.$drawer=$('#'+id);if(!this.$drawer.length){return false;}
this.drawerIsOpen=false;this.init();};Drawer.prototype.init=function(){$(this.config.open).on('click',$.proxy(this.open,this));this.$drawer.find(this.config.close).on('click',$.proxy(this.close,this));this.$drawer.on('click',function(e){e.stopPropagation();});this.$nodes.parent.on('click',function(e){ira.NavDrawer.close();ira.CartDrawer.close();});};Drawer.prototype.open=function(evt){var externalCall=false;if(evt){evt.preventDefault();}else{externalCall=true;}
$('.js-drawer-open-'+this.id).closest('.header-control').addClass('active');if(typeof ira.primaryCarousel!=='undefined'){ira.primaryCarousel.pause();}
if(typeof ira.secondaryCarousel!=='undefined'){ira.secondaryCarousel.pause();}
if(evt&&evt.stopPropagation){evt.stopPropagation();this.$activeSource=$(evt.currentTarget);}
if(this.drawerIsOpen&&!externalCall){return this.close();}
if(this.otherDrawersOpen()){this.otherDrawer().close();}
this.scrollPositionOnOpen=$(window).scrollTop();this.$nodes.moved.addClass('is-transitioning');this.$drawer.prepareTransition();this.$nodes.parent.addClass(this.config.openClass+' '+this.config.dirOpenClass);this.drawerIsOpen=true;Drawer.prototype.trapFocus(this.$drawer,'drawer_focus');if(this.config.onDrawerOpen&&typeof(this.config.onDrawerOpen)=='function'){if(!externalCall){this.config.onDrawerOpen();}}
if(this.$activeSource&&this.$activeSource.attr('aria-expanded')){this.$activeSource.attr('aria-expanded','true');}
this.$nodes.page.on('click.drawer',$.proxy(function(){this.close();return false;},this));};Drawer.prototype.close=function(evt){if(!this.drawerIsOpen){return;}
if($(window).width()<=840){$(window).scrollTop(this.scrollPositionOnOpen);}
if(typeof ira.primaryCarousel!=='undefined'){ira.primaryCarousel.play();}
if(typeof ira.secondaryCarousel!=='undefined'){ira.secondaryCarousel.play();}
$(document.activeElement).trigger('blur');this.$nodes.moved.prepareTransition({disableExisting:true});this.$drawer.prepareTransition({disableExisting:true});this.$nodes.parent.removeClass(this.config.dirOpenClass+' '+this.config.openClass);this.drawerIsOpen=false;Drawer.prototype.removeTrapFocus(this.$drawer,'drawer_focus');this.$nodes.page.off('.drawer');this.$nodes.headerControl.removeClass('active');};Drawer.prototype.trapFocus=function($container,eventNamespace){var eventName=eventNamespace?'focusin.'+eventNamespace:'focusin';$container.attr('tabindex','-1');$container.focus();$(document).on(eventName,function(evt){if($container[0]!==evt.target&&!$container.has(evt.target).length){$container.focus();}});};Drawer.prototype.removeTrapFocus=function($container,eventNamespace){var eventName=eventNamespace?'focusin.'+eventNamespace:'focusin';$container.removeAttr('tabindex');$(document).off(eventName);};Drawer.prototype.otherDrawer=function(){var output;ira.allDrawers.forEach(function(e){if(e.id!==this.id){output=e;}}.bind(this));return output;}
Drawer.prototype.otherDrawersOpen=function(){for(var i=0;i<ira.allDrawers.length;i++){var e=ira.allDrawers[i];if(e.drawerIsOpen&&(e.id!==this.id)){return true;}}
return false;}
return Drawer;})();ira.ImageGrid=(function(){var ImageGrid=function(options){var defaults={gridClass:'.grid--full'};this.config=$.extend(defaults,options);this.$nodes={parent:$('body, html'),grid:$(this.config.gridClass),imageCells:$('.grid__image'),};this.$grid=this.$nodes.grid;if(!this.$grid.length){return false;}
this.init();};ImageGrid.prototype.init=function(){var maxCallFrequency=100;var debouncedPrepare=_.debounce(function(){this.resizeImages();ira.masonryLayout();}.bind(this),maxCallFrequency);this.resizeImages();this.$grid.imagesLoaded().done(function(){this.resizeImages();ira.masonryLayout();$(window).on('resize',debouncedPrepare);}.bind(this));};ImageGrid.prototype.resizeImages=function(){var cells=this.$nodes.imageCells;var alternateImageSelector='.cell-wrapper--alternate-image';if(!cells.length)return;cells.each(function(i,e){var cell=$(e);var wrapper=$(e).find('.cell-wrapper');var img=wrapper.find('img:first')[0];wrapper.css({"height":"auto","width":"auto","marginLeft":0,"marginTop":0});resize(cell,wrapper,i);alternateImage=wrapper.find(alternateImageSelector);if(alternateImage.length){var altImgTargetEl=alternateImage.find('img');altImgTargetEl.height(wrapper.height());resize(cell,alternateImage);altImgTargetEl.addClass('ready');altImgTargetEl.parent().addClass('ready');}});};function resize(parentCell,contentWrapper,i){var newWidth,newMarginLeft,newMarginTop,wrapperAspectRatio,height,width,cellAspectRatio,alternateImage;var height=parentCell.height();var width=parentCell.width();if(parentCell.hasClass('grid__image--caption')){height=parentCell.find('.cell-wrapper').height()}
var cellAspectRatio=height / width;var wrapperAspectRatio=contentWrapper.height()/ contentWrapper.width();if(wrapperAspectRatio<cellAspectRatio){newWidth=Math.ceil(height / wrapperAspectRatio);newMarginLeft=-((newWidth-width)/ 2);contentWrapper.width(newWidth).css({'marginLeft':newMarginLeft});}
else{newWidth=Math.ceil(height / cellAspectRatio);newMarginTop=-((contentWrapper.height()-height)/ 2);contentWrapper.width(newWidth).css({'marginTop':newMarginTop});}}
return ImageGrid;})();ira.Carousel=(function(){var Carousel=function(options){var defaults={carouselClass:'.carousel',dotControlClass:'.slick-dots',carouselOverlay:'.carousel-overlay',progressBar:'.carousel__progress',timePerSlide:10000,carouselID:"#primaryCarousel",carouselTextClass:'.carousel-content',carouselContainer:'.carousel-container'}
this.primaryCarouselID='#primaryCarousel';this.nextElementFromPrimary='.js-after-primary-carousel'
this.config=$.extend(defaults,options);var carouselWrapper=$(this.config.carouselID);this.$nodes={carouselWrapper:carouselWrapper,dots:carouselWrapper.find(this.config.dotControlClass),overlay:carouselWrapper.find(this.config.carouselOverlay),progressBar:carouselWrapper.find(this.config.progressBar),textOverlay:carouselWrapper.find(this.config.carouselTextClass),container:carouselWrapper.find(this.config.carouselContainer)};this.$carousel=this.$nodes.carouselWrapper.find(this.config.carouselClass);this.loadProgressBar();respositionFirstProgressBar.bind(this)();this.handleOverlayOpacity();this.load();}
Carousel.prototype.load=function(){var enableKenBurns={{settings.enable_carousel_ken_burns}};if(!this.isPrimary())enableKenBurns={{settings.enable_carousel_ken_burns_v2}};if(enableKenBurns)this.loadKenBurns();this.loadSlickCarousel();this.repositionSlickDots();if(this.isPrimary()){this.fullScreen();this.pauseUntilFirstImageLoads();this.positionText();}};Carousel.prototype.positionText=function(){var carouselOverlay=this.$carousel.find('.carousel-overlay');setPaddingTop();$(window).on('resize',setPaddingTop);function setPaddingTop(){var headerHeight=$('.site-header').outerHeight();carouselOverlay.each(function(){$(this).css('padding-top',headerHeight);});}};Carousel.prototype.loadKenBurns=function(){var carouselImages=this.$carousel.find('.carousel__image');if(carouselImages.length==1){this.$carousel.on('init beforeChange',function(){this.kenBurnsLoopSingleImage(carouselImages);}.bind(this))}
else{this.kenBurnsEventListeners();}};Carousel.prototype.loadSlickCarousel=function(){this.$carousel.slick({autoplay:true,dots:true,arrows:false,mobileFirst:true,respondTo:'min',adaptiveHeight:false,autoplaySpeed:this.config.timePerSlide,pauseOnHover:false,draggable:false,fade:true,lazyload:'progressive',});};Carousel.prototype.isProgressBarEnabled=function(){var isEnabled;if(this.isPrimary()){isEnabled={{settings.enable_progress_bar}};}
else{isEnabled={{settings.enable_progress_bar_v2}}}
return isEnabled;}
Carousel.prototype.loadProgressBar=function(){var isEnabled=this.isProgressBarEnabled()
if(isEnabled){this.initProgressBarListeners()}}
Carousel.prototype.initProgressBarListeners=function(){this.$carousel.on('init',function(e){if(this.$carousel.find('.carousel__image').length==1){return;}
this.startProgressBar()}.bind(this));this.$carousel.on('beforeChange',function(evt){this.resetProgressBar()}.bind(this))
this.$carousel.on('afterChange',function(evt){this.startProgressBar()}.bind(this))}
Carousel.prototype.startProgressBar=function(){console.log('startProgressBar called');console.trace();var time=this.config.timePerSlide+"ms";$(this.$nodes.progressBar).css('transition',time).css('width','100%');};Carousel.prototype.resetProgressBar=function(){$(this.$nodes.progressBar).css('transition',0).css('width','0%');}
Carousel.prototype.pause=function(){this.$carousel.slick('pause');this.resetProgressBar();};Carousel.prototype.play=function(){this.$carousel.slick('play');if(this.$carousel.find('.carousel__image').length>1&&this.isProgressBarEnabled()){this.startProgressBar()}};Carousel.prototype.pauseUntilFirstImageLoads=function(){this.pause();var images=$('<img>');$('.carousel__image:first').each(function(){var el=$(this),image=el.css('background-image').match(/url\((['"])?(.*?)\1\)/);if(image)
images=images.add($('<img>').attr('src',image.pop()));});images.imagesLoaded(function(data){this.play();}.bind(this));};Carousel.prototype.repositionSlickDots=function(){var primarySlickDotsClass='primary-slick-dots';var dots=this.$carousel.find(this.config.dotControlClass).detach();dots.appendTo(this.config.carouselID+' .carousel-controls');};Carousel.prototype.handleOverlayOpacity=function(){var duration=$(this.$nodes.overlay).css('transition-duration');var delay=$(this.$nodes.overlay).css('transition-delay');this.$carousel.on('init',function(e){$(this.$nodes.textOverlay).css('opacity',1);}.bind(this));this.$carousel.on('beforeChange',function(evt,slick,currentSlide,nextSlide){if(currentSlide===nextSlide)return;$(this.$nodes.textOverlay).css({'transition-duration':'0ms','transition-delay':'0ms','-webkit-transition-duration':'0ms','-webkit-transition-delay':'0ms','opacity':0,});}.bind(this))
this.$carousel.on('afterChange',function(evt){$(this.$nodes.textOverlay).css({'transition-duration':duration,'transition-delay':delay,'-webkit-transition-duration':duration,'-webkit-transition-delay':duration,'opacity':1,});}.bind(this))};Carousel.prototype.kenBurnsEventListeners=function(){var className='ken-burns'
this.$carousel.on('init',function(){var currentSlide=this.$carousel.find('.carousel__slide[data-slick-index=0]');kenBurnsify(currentSlide);}.bind(this));this.$carousel.on('afterChange',function(evt,slick,currentSlideIndex){var currentSlide=this.$carousel.find('.carousel__slide[data-slick-index='+currentSlideIndex+']');kenBurnsify(currentSlide);}.bind(this));this.$carousel.on('beforeChange',function(evt,slick,currentSlideIndex,nextSlideIndex){var nextSlide=this.$carousel.find('.carousel__slide[data-slick-index='+nextSlideIndex+']');if(currentSlideIndex===nextSlideIndex)return;$(this.config.carouselID+' .'+className).css({'transition-duration':0,'-webkit-transition-duration':0}).removeClass(className);}.bind(this));var kenBurnsify=function(currentSlide){var target=currentSlide.find('.carousel__image');target.css({'transition':'transform '+this.config.timePerSlide+'ms','-webkit-transition':'-webkit-transform '+this.config.timePerSlide+'ms',"transform-origin":"bottom center"}).addClass(className)}.bind(this)};Carousel.prototype.kenBurnsLoopSingleImage=function(img){var className='ken-burns';var zoomOutSpeedMultiplier=2;var zoomOutSpeed=this.config.timePerSlide*zoomOutSpeedMultiplier;var otherTransitions=img.css('transition');img.css({"transform-origin":"bottom center"});var addKenBurns=function(){var transform='transform '+this.config.timePerSlide+'ms linear, '+otherTransitions;img.css({'transition':transform,'-webkit-transition':'-webkit-'+transform});img.addClass(className);setTimeout(removeClass,this.config.timePerSlide);}.bind(this);var removeClass=function(){var transform='transform '+zoomOutSpeed+'ms linear, '+otherTransitions;img.css({'transition':transform,'-webkit-transition':'-webkit-'+transform});img.removeClass(className);setTimeout(addKenBurns,zoomOutSpeed);}.bind(this);addKenBurns();};Carousel.prototype.fullScreen=function(){keepFullScreen(this.$nodes.carouselWrapper);};Carousel.prototype.isPrimary=function(){return this.config.carouselID===this.primaryCarouselID;};function setFullScreen(carousel){var minHeight=400;$(carousel).height(function(index,height){var defaultHeight=window.innerHeight-$(this).offset().top;var newHeight=defaultHeight>minHeight?defaultHeight:minHeight;return newHeight});}
function keepFullScreen(carousel){if(/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream){return;}
setFullScreen(carousel);$(window).resize(function(){afterResize(function(){setFullScreen(carousel);},200,'resizeCarousel');})}
function respositionFirstProgressBar(){if(this.config.carouselID!=='#primaryCarousel')return;var bar=this.$nodes.progressBar.detach();$(this.nextElementFromPrimary).prepend(bar);}
return Carousel;})();ira.InstaGrid=(function(){var InstaGrid=function(){this.clientID='{{settings.instagram_grid_API}}'||false;this.baseAPI='https://api.instagram.com/v1/';this.numberOfImages=8;this.maxImages=8;this.imageIndex=this.numberOfImages;this.$node=$('#instagrid');this.transitionSpeed=1000;this.instagramImageData=[];this.captionClassName='instagrid-caption';this.refreshTime=2500;this.randomize=true;this.loopAnimation=true;if(this.$node.length&&this.clientID){this.init();}}
InstaGrid.prototype.init=function(){this.authenticateWithAccessToken({'accessToken':this.clientID,'feedType':'{{settings.instagram_feed_type}}'}).then(function(images){this.insertImages(images);this.resizeListener();this.continuallyUpdateImages();}.bind(this)).fail(function(response){this.$node.remove();console.error("Could not instantiate Instagram Grid.",response);}.bind(this))};InstaGrid.prototype.getUserID=function(userName){var url=this.baseAPI+'users/search?q='+userName+'&client_id='+this.clientID;url+='&callback=callbackFunction';var promise=jQuery.Deferred();$.ajax({'type':'GET',dataType:'jsonp',data:{},url:url,success:function(data){if(typeof data.data==="undefined"){return promise.reject(data.meta);}
var target=data.data.filter(function(e){return e.username===userName});promise.resolve(target[0].id)}.bind(this),});return promise.promise();};InstaGrid.prototype.authenticateWithAccessToken=function(options){if(typeof options.feedType!=='string'){options.feedType='recent';}
var promise=jQuery.Deferred();var url=this.baseAPI+'users/self/media/'+options.feedType+'?access_token='+options.accessToken;$.ajax({'type':'GET',dataType:'jsonp',data:{},url:url,success:function(response){if(!response){promise.reject({code:400,message:"No response from Instagram servers"});}
if(response.meta.code===400){promise.reject(response);}
if(response.meta.code===200||String(response.meta.code).indexOf('2')===0){this.instagramImageData=response.data;promise.resolve(response.data);}
promise.reject(response);}.bind(this)});return promise.promise();};InstaGrid.prototype.insertImages=function(images){var exampleDiv=this.$node.find('div:first').detach();var classes=exampleDiv[0].className;var allImages=[];if(this.numberOfImages>images.length){this.numberOfImages=images.length;}
images.forEach(function(image,i){if(i>=this.maxImages)return;var div=document.createElement('div');var src=image.images.standard_resolution.url;var img=document.createElement('img');var link=document.createElement('a');var spacer=document.createElement('div');spacer.className='spacer'
img.src=src;img.className='photo';div.className=classes;link.href=image.link;div.appendChild(img);div.appendChild(spacer);link.appendChild(div);this.createAndAppendCaption(image,div);allImages.push(link);}.bind(this))
this.$node.append(allImages);}
InstaGrid.prototype.createAndAppendCaption=function(image,target){var caption=this.createCaption(image);return target.appendChild(caption);};InstaGrid.prototype.createCaption=function(image){var caption=document.createElement('div');var likes=document.createElement('p');var heart=$('<svg width="16px" height="15px" viewBox="0 0 16 15" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns"><title>0219-heart</title><desc>Created with Sketch.</desc><defs></defs><g id="Index-—-Presets" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" sketch:type="MSPage"><g id="Preset-4-—-Footer-1" sketch:type="MSArtboardGroup" transform="translate(-108.000000, -2697.000000)" fill="#FFFFFF"><g id="0219-heart-+-0-copy" sketch:type="MSLayerGroup" transform="translate(108.000000, 2696.000000)"><path d="M11.7993748,1 C10.1184373,1 8.67062483,2.38538538 8.00062484,3.83119748 C7.32906236,2.38538538 5.88124989,1 4.20031242,1 C1.88124996,1 0,2.90581446 0,5.25264907 C0,10.0276255 4.75843741,11.2795026 8.00062484,16.0003796 C11.0656248,11.3092414 15.9996872,9.87576773 15.9996872,5.25264907 C15.9996872,2.90581446 14.1187497,1 11.7993748,1 L11.7993748,1 Z" id="0219-heart" sketch:type="MSShapeGroup"></path></g></g></g></svg>')[0];var span=document.createElement('span');var text=document.createElement('p');caption.className=this.captionClassName;text.className='quote';span.className='count';likes.className='likes';var willImageHave=doesImageHaveCaption(image);if(willImageHave['text']){text.innerHTML=image.caption.text;}
if(willImageHave['likes']){var likesText=document.createTextNode(image.likes.count);span.appendChild(likesText);}
likes.appendChild(span);likes.appendChild(heart);caption.appendChild(text);caption.appendChild(likes);return caption;};InstaGrid.prototype.replaceCaption=function(index,image){var target=this.$node.children().eq(index);var captionSelector='.instagrid-caption'
var countSelector=captionSelector+' .likes .count';var quoteSelector=captionSelector+' .quote';var captionText='';var likeCount=0;var willImageHave=doesImageHaveCaption(image);if(willImageHave['text']){captionText=image.caption.text;}
if(willImageHave['likes']){var likeCount=image.likes.count;}
target.find(quoteSelector).text(captionText);target.find(countSelector).text(likeCount);};InstaGrid.prototype.replaceImage=function(index,image){var nodes=this.$node.children();var target=nodes.eq(index);var originalImg=target.find('img.photo');var newImg=document.createElement('img');var transitionCSS=this.transitionSpeed+'ms ease-in-out';var instagramLink=image.images.standard_resolution.url;var source=image.link;target.attr('href',source);newImg.src=instagramLink;newImg.className='photo';this.prepareImageForReplacement(index);originalImg.css('transition',transitionCSS).css('opacity','0');setTimeout(function(){originalImg.remove();},this.transitionSpeed)
$(newImg).css('position','absolute')
target.children().prepend(newImg);this.replaceCaption(index,image);};InstaGrid.prototype.prepareImageForReplacement=function(index){var nodes=this.$node.children();var target=nodes.eq(index);var spacer=target.find('.spacer')
var img=target.find('img.photo');var imgHeight,spacerHeight;if(typeof window.getComputedStyle==='function'){imgHeight=getComputedStyle(img[0]).height;spacerHeight=getComputedStyle(spacer[0]).height;}
else{imgHeight=$(img).height();spacerHeight=$(spacer).height();}
if(imgHeight>0&&imgHeight===spacerHeight)return;spacer.css('height',imgHeight);img.css('position','absolute');};InstaGrid.prototype.prepareAllImages=function(){var nodes=this.$node.children();nodes.each(this.prepareImageForReplacement.bind(this));};InstaGrid.prototype.updateImages=function(index){if(this.imageIndex>=this.instagramImageData.length-1){if(!this.loopAnimation){return this.haltUpdatingImages();}
this.imageIndex=0;}
var img=this.instagramImageData[this.imageIndex++];var duplicates=this.$node.children().toArray().filter(function(e,i){return e.href===img.link;});if(duplicates.length){console.info("Duplciate image in InstaGrid, skipping it.");return;}
this.replaceImage(index,img)};InstaGrid.prototype.continuallyUpdateImages=function(){var index=0;if(this.instagramImageData.length<=this.maxImages){return;}
this.updateInterval=setInterval(function(){if(this.randomize){index=Math.floor(Math.random()*this.numberOfImages+1);}
if(index>=this.numberOfImages)index=0;this.updateImages(index++)}.bind(this),this.refreshTime)};InstaGrid.prototype.haltUpdatingImages=function(){clearInterval(this.updateInterval);};InstaGrid.prototype.resizeListener=function(){var maxCallFrequency=100;var debouncedPrepare=_.debounce(function(){this.prepareAllImages();}.bind(this),maxCallFrequency);$(window).on('resize',debouncedPrepare);};function doesImageHaveCaption(image){var likes=(!_.isNull(image.likes)&&typeof image.likes.count==='number')
var text=(!_.isNull(image.caption)&&typeof image.caption.text==='string')
if(!text&&!likes){return false;}
return{text:text,likes:likes}}
return InstaGrid;})();$(ira.init);history.navigationMode='compatible';(function(){$(document).ready(function(){if(!(navigator.appVersion.indexOf("MSIE 8")>0)){return;}
if($(window).width()>=840){$('.large--one-third').css('width','33.33%');}
$('.site-header .large--one-third').css('width','33.33%');$('.controls-container').css('width','100%');});})()