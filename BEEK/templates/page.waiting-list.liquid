<div class="waiting__list_wrapper">
    <div class="hero_section">
        <img class="d-none d-sm-block" src="{{ page.metafields.accentuate.hero_waiting_desktop_image[0].src }}" alt="">
        <img class="d-sm-none" src="{{ page.metafields.accentuate.hero_waiting_mobile_image[0].src }}" alt="">
        <div class="hero_text">
            <h1>{{ page.metafields.accentuate.hero_waiting_title }}</h1>
            <p>{{ page.metafields.accentuate.hero_waiting_text }}</p>
        </div>
    </div>
    <div class="container">
        <div class="row">
            <div class="waiting_list_inner">
                {% section 'waiting-list' %}
            </div>
            <div class="featured__products">
                {% section 'home-featured' %}
            </div>
        </div>
    </div>
</div>

<script>
    var $products = $('.featured__products');
    var $banner = $('.hero_section');
    var $content = $('.waiting_list_inner');
    $(document).on('click', '.waiting__list_wrapper button', function () {
      var $inputs = $('.waiting__list_wrapper').find('input[type="text"], input[type="email"]');
      var flag = false;

      $inputs.each(function (i, el) {
        if ($(el).val() === "") {
          return flag = false;
        }
        if (el.type === 'email') {
          if (!validateEmail($(el).val())) {
            return flag = false;
          }
        }
        flag = true;
      });

      function validateEmail(email) {
        const re = /^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
        return re.test(String(email).toLowerCase());
      }

      if (flag) {
        setTimeout(function() {
          $products.addClass('active');
          $banner.addClass('hidden');
          $content.addClass('success');
        }, 1000);
      }
    })
</script>
