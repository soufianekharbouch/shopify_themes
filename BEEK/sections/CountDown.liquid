{{ 'count_down.css' | asset_url | stylesheet_tag }}
<div id="countDown1" class="landing_hero_container test">
  <div class="landing_left_hero">   
    {%if section.settings.show_count_down %}
       <div class="landing_count_down">
         <div class="landing_count_down_text">
          <span class="landing_days_text lnd">--</span>
          <div class="landing_label" > DAYS </div>
        </div>

        <div class="landing_count_down_text">
          <span class="landing_hours_text lnd" >--</span>
          <div class="landing_label" > HRS </div>
        </div> 

        <div class="landing_count_down_text">
          <span class="landing_minutes_text lnd" >--</span>
          <div class="landing_label" > MINS </div>
        </div>

        <div class="landing_count_down_text">
          <span class="landing_seconds_text lnd" >--</span>
          <div class="landing_label" > SECS </div>
        </div>
       </div>
      <div class="landing_count_down in-live">
         <div class="sub-in-live">
         <span><a href="{{section.settings.live-link}}">We are live!</a> </span>
         </div>  
       </div>
    {%else%}
       <div class="landing_count_down">
         <div class="sub-in-off">
         <span><a href="{{section.settings.live-link}}">{{section.settings.custom_text}}</a> </span>
         </div> 
       </div>
    {%endif%}   
  </div>
  </div>
</div>
<script>
  var mnt="{{section.settings.start_month}}";
  var ddy="{{section.settings.start_day}}";
  var hrr="{{section.settings.start_hours}}";
  var mnn="{{section.settings.start_minute}}";
  if (mnt.length == 1) mnt="0"+mnt;
  if (ddy.length == 1) ddy="0"+ddy;
  if (hrr.length == 1) hrr="0"+hrr;
  if (mnn.length == 1) mnn="0"+mnn;
  var dtt="{{section.settings.start_year}}-"+mnt+"-"+ddy+"T"+hrr+":"+mnn+":00"; 
  var countDownDate = new Date(dtt).getTime();
  var nowdt='{{"now" | date: "%Y-%m-%dT%H:%M:%S" }}';

  
  var x = setInterval(function() {
  var now = new Date(nowdt)
  now.setSeconds(now.getSeconds() + 1);
  nowdt=now;
  var distance = countDownDate - now; 
  var days = Math.floor(distance / (1000 * 60 * 60 * 24));
  var hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
  var minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
  var seconds = Math.floor((distance % (1000 * 60)) / 1000);
  days=""+days+""; hours=""+hours+""; minutes=""+minutes+""; seconds=""+seconds+"";
  if (days.length == 1) days="0"+days;
  if (hours.length == 1) hours="0"+hours;
  if (minutes.length == 1) minutes="0"+minutes;
  if (seconds.length == 1) seconds="0"+seconds;
  $("#countDown1").find('.landing_days_text').html(days);
  $("#countDown1").find('.landing_hours_text').html(hours);
  $("#countDown1").find('.landing_minutes_text').html(minutes);
  $("#countDown1").find('.landing_seconds_text').html(seconds);
  if (distance < 0) {
    clearInterval(x);
 $("#countDown1").find('.landing_days_text').html("00");
  $("#countDown1").find('.landing_hours_text').html("00");
  $("#countDown1").find('.landing_minutes_text').html("00");
  $("#countDown1").find('.landing_seconds_text').html("00");
  $('.landing_count_down').addClass('alertt')
  }
  }, 1000);
</script>
<style>
  #countDown1 {
    margin-bottom: -25px;
    margin-top: 8px;
  }
</style>
{% schema %}
{
  "name": "Count Down",
  "settings": [ 
     {
        "type": "header",
        "content": "Start date for COUNTDOWN"
      },
    {
      "type": "range",
      "id": "start_year",
      "label": "Year",
        "min": 2021,
        "max": 2030,
        "step": 1,
      "default": 2022
    },
    {
      "type": "range",
      "id": "start_month",
      "label": "Month",
        "min": 1,
        "max": 12,
        "step": 1,
      "default": 12
    },
   {
      "type": "range",
      "id": "start_day",
      "label": "Day",
        "min": 1,
        "max": 31,
        "step": 1,
      "default": 6
    },
   {
      "type": "range",
      "id": "start_hours",
      "label": "Hours",
        "min": 0,
        "max": 23,
        "step": 1,
      "default": 22
    },
   {
      "type": "range",
      "id": "start_minute",
      "label": "Minute",
        "min": 0,
        "max": 60,
        "step": 1,
      "default":38
    },
     {
      "type": "checkbox",
      "id": "show_count_down",
      "label": "Show count down",
      "default": true
    },
    {
      "type": "text",
      "id": "custom_text",
      "label": "Text if count down Off",
      "default": "Default custom text when count down is off!"
    },
      {
      "type": "url",
      "id": "live-link",
      "label": "Live URL"
    }  
  ],

  "presets": [
  {
    "name": "Count Down"
  }
]
}
{% endschema %}

